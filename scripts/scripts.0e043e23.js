"use strict";angular.module("kittynotesApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).factory("authInterceptor",["$q","$location",function(a,b){return{request:function(a){return a.headers=a.headers||{},localStorage.fname&&localStorage.lname&&localStorage.email&&localStorage.access_token&&(a.headers["API-USER"]=localStorage.email,a.headers["API-ACCESS-TOKEN"]=localStorage.access_token),a},responseError:function(c){return localStorage.clear(),b.path("/"),a.reject(c)}}}]).config(["$httpProvider",function(a){a.interceptors.push("authInterceptor")}]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html"}).when("/features",{templateUrl:"views/features.html"}).when("/about",{templateUrl:"views/about.html"}).when("/user",{templateUrl:"views/user.html",controller:"UserCtrl"}).otherwise({templateUrl:"404.html"})}]),angular.module("kittynotesApp").service("StoreUserLocallyService",function(){var a=function(a,b,c,d){localStorage.setItem("fname",a),localStorage.setItem("lname",b),localStorage.setItem("email",c),localStorage.setItem("access_token",d)},b=function(){return{fname:localStorage.getItem("fname"),lname:localStorage.getItem("lname"),email:localStorage.getItem("email"),access_token:localStorage.getItem("access_token")}},c=function(){localStorage.removeItem("fname"),localStorage.removeItem("lname"),localStorage.removeItem("email"),localStorage.removeItem("access_token")};return{createRecord:a,readRecord:b,deleteRecord:c}}),angular.module("kittynotesApp").controller("GoogleAuthenticationControllerCtrl",["$scope","$window","$http","$location","StoreUserLocallyService",function(a,b,c,d,e){var f=function(){return"/user"},g=e.readRecord();g.fname&&g.lname&&g.email&&g.access_token&&d.path(f())}]),angular.module("kittynotesApp").controller("UserCtrl",["$scope","$location","$http","StoreUserLocallyService","NotesListService",function(a,b,c,d,e){a.user=d.readRecord(),a.user.fname&&a.user.lname&&a.user.email&&a.user.access_token||(d.deleteRecord(),b.path("/")),a.new_note={title:"",content:""};var f=function(a){return"https://kittynotesapi.herokuapp.com/api/v1/"+a};a.save_new_note=function(){var b={method:"POST",url:f("notes"),data:a.new_note};c(b).then(function(b){10===a.notes_list.length&&a.notes_list.pop(),a.notes_list.unshift(b.data),a.new_note={title:"",content:""}},function(a){alert("Cannot save note. Try again.")})},a.save_note=function(a){var b={method:"PUT",url:f("notes")+"/"+a.id,data:a};c(b).then(function(a){alert("Note saved or updated.")},function(a){alert("Cannot save note. Try again.")})},a.delete_note=function(b){var d={method:"DELETE",url:f("notes")+"/"+b.id};confirm("Are you sure about deleting note?")&&c(d).then(function(b){a.get_notes_list(a.limit,a.offset)},function(a){alert("Cannot delete note. Try again.")})},a.limit=10,a.offset=0,a.is_next=!1,a.is_previous=!1;var g=function(b,c,d){c>0?a.is_previous=!0:a.is_previous=!1,d==a.limit?a.is_next=!0:a.is_next=!1};a.get_notes_list=function(b,d){var e={method:"GET",url:f("notes"),params:{limit:b,offset:d}};c(e).then(function(b){a.notes_list=b.data.results,g(b.data.limit,b.data.offset,b.data.total)},function(b){a.notes_list=[]})},a.get_next_notes_list=function(){a.offset+=a.limit,console.log(a.limit,a.offset),a.get_notes_list(a.limit,a.offset)},a.get_previous_notes_list=function(){a.offset-=a.limit,console.log(a.limit,a.offset),a.get_notes_list(a.limit,a.offset)};var h=function(){a.get_notes_list(a.limit,a.offset)};h()}]),angular.module("kittynotesApp").run(["$templateCache",function(a){a.put("views/about.html",'<div ng-include src="\'views/navigations.html\'"> </div> <div class="container-fluid"> <div class="container" style="line-height: 30px"> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"> <h4>About VirtualGeeks Technology Solutions</h4> <hr> <p class="justify-align"> VirualGeeks Technology Solutions came to existance in year in 2014 with the motive of building innovative products or solutions to various technology and social issues. We started with educational apps for kids and undergraduates, and then moved into ecommerce industry. We provide web, and mobile solutions for our clients now. </p> <div class="center-align"> <b>Contact Us</b> <p> <i class="fa fa-envelope-o"></i> &nbsp; <a class="email-link" href="mailto:hi@virtualgeeks.in">hi@virtualgeeks.in</a> </p> <p> <i class="fa fa-phone"></i> &nbsp; +91-709000XXXX </p> </div> </div> <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"> <h4>About Kunal Sharma</h4> <hr> <p class="justify-align"> Kunal Sharma, founder of VirtualGeeks Technology Solutions started this venture with motive of building products for ed-tech industry. He is a techie with great human values. <div class="center-align"> Meet <b>Kunal Sharma</b> <p> <a class="btn btn-info" href="https://twitter.com/kunalprompt" role="button" target="_blank">@Twitter</a> </p> <p> <a class="btn btn-primary" href="https://in.linkedin.com/in/kunalprompt" role="button" target="_blank">@LinkedIn</a> </p> </div> </p> </div> </div> </div> </div>'),a.put("views/features.html",'<div ng-include src="\'views/navigations.html\'"> </div> <div class="container-fluid"> <div class="container" style="line-height: 30px"> <h2 class="text-primary center-align"> Features of KittyNotes </h2> <hr> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 center-align"> <i class="fa fa-4x fa-diamond google-icon-color"></i> <h3>Simple</h3> <p>Sign Up with Google Account (No need to remember passwords). Just click to create a Note.</p> </div> <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 center-align"> <i class="fa fa-4x fa-paper-plane google-icon-color"></i> <h3>Available Everywhere</h3> <p>You need to be on Internet thats all KittyNotes require. Anytime, anywhere access to your data.</p> </div> <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 center-align"> <i class="fa fa-4x fa-suitcase google-icon-color"></i> <h3>Safe and Secure</h3> <p>100% secure and safe. You data is stored on secure cloud infrastructure. So don\'t worry.</p> </div> <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 center-align"> <i class="fa fa-4x fa-heart google-icon-color"></i> <h3>Made with Love</h3> <p>We crafted Kitty Notes with love just for you in India, an emerging economy and growing market.</p> </div> </div> </div> </div>'),a.put("views/main.html",'<div ng-include src="\'views/navigations.html\'"> </div> <!-- BEGIN Pre-requisites --> <meta name="google-signin-client_id" content="84403117316-o4qsrbq8apv8umkgvcht7vn9bo67gog3.apps.googleusercontent.com"> <!-- END Pre-requisites --> <div class="container"> <div class="jumbotron center-align"> <h1>\'Allo, \'Allo!</h1> <p class="lead"> <img src="images/hicartoons.59640faf.png" alt="I\'m KittyNotes"><br> Start creating memories with KittyNotes. </p> <div class="row"> <div class="col-xs-12"> <div id="google-signup-btn"> <div id="my-signin2"></div> </div> </div> </div> </div> </div> <script>function onSuccess(googleUser) {\n  var id_token = googleUser.getAuthResponse().id_token;\n  authenticateUser(id_token);\n}\nfunction onFailure(error) {\n  alert(\'Cannot connect to Google now. Check your Internet connection or try again later\');\n  localStorage.clear();\n  signOut();\n}\nfunction renderButton() {\n  gapi.signin2.render(\'my-signin2\', {\n'+"    'scope': 'profile email',\n    'width': 240,\n    'height': 40,\n    'longtitle': true,\n    'theme': 'dark',\n    'onsuccess': onSuccess,\n    'onfailure': onFailure\n  });\n}\n\nfunction signOut() {\n  var auth2 = gapi.auth2.getAuthInstance();\n  auth2.signOut().then(function () {\n    var v;\n  });\n}\n\nfunction authenticateUser(google_id_token){\n  $.ajax({\n    url: 'https://kittynotesapi.herokuapp.com/api/v1/users',\n    type: 'post',\n    contentType: 'application/json',\n    data: JSON.stringify({ google_id_token: google_id_token }),\n    success: function( data, textStatus, jQxhr ){\n        localStorage.setItem('fname', data.fname);\n        localStorage.setItem('lname', data.lname);\n        localStorage.setItem('email', data.email);\n        localStorage.setItem('access_token', data.access_token);\n        window.location = '/#/user';\n    },\n    error: function( jqXhr, textStatus, errorThrown ){\n        alert('Cannot connect to server now. Check your Internet connection or try again later');\n        localStorage.clear();\n        signOut();\n    }\n  });\n}</script> <script src=\"https://apis.google.com/js/platform.js?onload=renderButton\" async defer></script>"),a.put("views/navigations.html",'<nav class="navbar navbar-creative"> <div class="container"> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> <span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i> </button> <a href="#/" class="navbar-brand"> <b> <i class="fa fa-file-text" aria-hidden="true"></i> &nbsp; KittyNotes </b> </a> </div> <!-- <p class="navbar-text navbar-right text-white navbar-text-toggle">\n\t\t\tA product of VirtualGeeks Technology Solutions\n\t\t</p> --> <div id="navbar" class="navbar-collapse collapse"> <ul class="nav navbar-nav navbar-right"> <!-- <li>\n\t\t            <a href="">\n\t\t                <span style="padding: 10px; border: 1px solid #fff; border-radius: 5px; font-weight: bold;">  Sign Up </span>\n\t\t            </a>\n\t\t        </li> --> <li> <a href="#/features">Features</a> </li> <li> <a href="#/about">About VirtualGeeks</a> </li> </ul> </div> </div> </nav>'),a.put("views/user.html",'<div ng-controller="UserCtrl"> <!-- Navigation Bar --> <meta name="google-signin-client_id" content="84403117316-o4qsrbq8apv8umkgvcht7vn9bo67gog3.apps.googleusercontent.com"> <script src="https://apis.google.com/js/platform.js?onload=onLoad" async defer></script> <script>function signOut() {\n\t\t\tvar auth2 = gapi.auth2.getAuthInstance();\n\t\t\tauth2.signOut().then(function () {\n\t\t\t\t\tlocalStorage.clear();\n\t\t\t\t}, function () {\n\t\t\t\t\tlocalStorage.clear();\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tfunction onLoad() {\n\t\t  gapi.load(\'auth2\', function() {\n\t\t    gapi.auth2.init();\n\t\t  });\n\t\t}</script> <nav class="navbar navbar-creative"> <div class="container"> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> <span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i> </button> <a href="#/" class="navbar-brand"> <b> <i class="fa fa-file-text"></i> &nbsp; KittyNotes </b> </a> </div> <form class="navbar-form navbar-left"> <div class="form-group"> <input type="text" class="form-control" placeholder="Filter results here" ng-model="searchText"> </div> </form> <div id="navbar" class="navbar-collapse collapse"> <ul class="nav navbar-nav navbar-right"> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> Hi {{user.fname}} <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a>{{user.email}}</a></li> <li role="separator" class="divider"></li> <li><a href="/#/" onclick="signOut()">Sign out</a></li> </ul> </li> </ul> </div> </div> </nav> <!-- new note --> <div class="container"> <div class="row new_note_row"> <div class="col-xs-12"> <div class="note_box"> <div ng-if="new_note.title.length > 1024" class="alert alert-danger">Title length should not be more 1024.</div> <div ng-if="new_note.content.length > 2048" class="alert alert-danger">Content length should not be more than 2048.</div> <div class="new_note"> <textarea id="note_title" placeholder="Title" ng-model="new_note.title" onkeypress="if (this.value.length > 1024) { return false; }">\n\t\t\t\t\t\t\t</textarea> <textarea id="note_content" placeholder="Take a Note" ng-model="new_note.content" onkeypress="if (this.value.length > 2048) { return false; }">\n\t\t\t\t\t\t\t</textarea> <div style="text-align: right"> <span class="badge">Title: {{new_note.title.length}}</span> <span class="badge">Content: {{new_note.content.length}}</span> &nbsp; &nbsp; <input type="button" class="btn btn-success" value="Create a new Note" ng-click="save_new_note()"> </div> </div> </div> </div> </div> <hr> </div> <!-- old notes --> <div class="container"> <div class="row"> <div class="col-xs-12 col-sm-6" ng-repeat="note in notes_list | filter: searchText"> <div class="old_note"> <textarea id="note_title" placeholder="Title" ng-model="note.title" onkeypress="if (this.value.length > 1024) { return false; }"></textarea> <textarea id="note_content" placeholder="Take a Note" ng-model="note.content" onkeypress="if (this.value.length > 2048) { return false; }"></textarea> <div class="right-align old_note_btns"> <input type="button" class="btn btn-danger" value="Delete" ng-click="delete_note(note)"> &nbsp; <input type="button" class="btn btn-success" value="Save" ng-click="save_note(note)"> </div> </div> </div> </div> </div> <div class="container pagination-container"> <div class="row"> <div class="col-xs-12"> <ul class="pager"> <li class="previous" ng-show="is_previous"> <a ng-click="get_previous_notes_list()"> <span aria-hidden="true">&larr;</span> Older </a> </li> <li class="next" ng-show="is_next"> <a ng-click="get_next_notes_list()"> Newer <span aria-hidden="true">&rarr;</span> </a> </li> </ul> </div> </div> </div> </div> <!-- ./UserCtrl -->')}]);